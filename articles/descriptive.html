<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="narrator">
<title>Descriptive Narratives â€¢ narrator</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.5/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Descriptive Narratives">
<meta property="og:description" content="narrator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">narrator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/descriptive.html">Descriptive Narratives</a>
    <a class="dropdown-item" href="../articles/echarts.html">Narrate Echarts Plots</a>
    <a class="dropdown-item" href="../articles/formatting.html">Formatting Output</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/denisabd/narrator/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Descriptive Narratives</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/denisabd/narrator/blob/HEAD/vignettes/descriptive.Rmd" class="external-link"><code>vignettes/descriptive.Rmd</code></a></small>
      <div class="d-none name"><code>descriptive.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://denisabd.github.io/narrator/">narrator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="descriptive-narrative">Descriptive Narrative<a class="anchor" aria-label="anchor" href="#descriptive-narrative"></a>
</h2>
<p>Basic narrative type is descriptive stats, looking into outliers or
biggest contributors to the total volumes in the data set. This
narratives are quite useful and can help to look deeper into the data
set hierarchy.</p>
<div class="section level3">
<h3 id="simple-table">Simple Table<a class="anchor" aria-label="anchor" href="#simple-table"></a>
</h3>
<p>Starting with a simplest table that has only one dimension and one
measure. Here overall sales volume as well as outlying Territories will
be analyzed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_one</span> <span class="op">&lt;-</span> <span class="va">sales</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Region</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>Sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Sales</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Sales</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">df_one</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Region</th>
<th align="right">Sales</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NA</td>
<td align="right">1011609.9</td>
</tr>
<tr class="even">
<td align="left">EMEA</td>
<td align="right">655361.4</td>
</tr>
<tr class="odd">
<td align="left">ASPAC</td>
<td align="right">286822.2</td>
</tr>
<tr class="even">
<td align="left">LATAM</td>
<td align="right">181072.7</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_one</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Regions: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Region by Sales`</span></span>
<span><span class="co">#&gt; Outlying Regions by Sales are NA (1 M, 47.4 %), EMEA (655.4 K, 30.7 %).</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarization">Summarization<a class="anchor" aria-label="anchor" href="#summarization"></a>
</h3>
<p>There are multiple summarization/aggregation options for the data
frame, controlled by <code>summarization</code> argument that can be
<code>sum</code>, <code>count</code> or <code>mean</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sales</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"Sales"</span>, dimensions <span class="op">=</span> <span class="st">"Region"</span>, summarization <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Regions: 985.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Region by Sales`</span></span>
<span><span class="co">#&gt; Outlying Regions by Sales are NA (459, 46.2 %), EMEA (301, 30.3 %).</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sales</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"Sales"</span>, dimensions <span class="op">=</span> <span class="st">"Region"</span>, summarization <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Regions: 2,134.866.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Region by Sales`</span></span>
<span><span class="co">#&gt; Outlying Regions by Sales are LATAM (2,208.203, 26.1 %), NA (2,180.194, 25.8 %).</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiple-dimensions">Multiple Dimensions<a class="anchor" aria-label="anchor" href="#multiple-dimensions"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_two</span> <span class="op">&lt;-</span> <span class="va">sales</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NA"</span>, <span class="st">"EMEA"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Region</span>, <span class="va">Product</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>Sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Sales</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Sales</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">df_two</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Region</th>
<th align="left">Product</th>
<th align="right">Sales</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NA</td>
<td align="left">Product E</td>
<td align="right">241563.28</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">Product B</td>
<td align="right">201925.24</td>
</tr>
<tr class="odd">
<td align="left">EMEA</td>
<td align="left">Product E</td>
<td align="right">198620.44</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">Product F</td>
<td align="right">154115.24</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">Product H</td>
<td align="right">123695.16</td>
</tr>
<tr class="even">
<td align="left">EMEA</td>
<td align="left">Product B</td>
<td align="right">95869.62</td>
</tr>
<tr class="odd">
<td align="left">EMEA</td>
<td align="left">Product F</td>
<td align="right">92931.12</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">Product I</td>
<td align="right">92738.76</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">Product C</td>
<td align="right">84339.34</td>
</tr>
<tr class="even">
<td align="left">EMEA</td>
<td align="left">Product H</td>
<td align="right">77261.02</td>
</tr>
<tr class="odd">
<td align="left">EMEA</td>
<td align="left">Product I</td>
<td align="right">76812.68</td>
</tr>
<tr class="even">
<td align="left">EMEA</td>
<td align="left">Product C</td>
<td align="right">73731.70</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">Product D</td>
<td align="right">56915.32</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">Product A</td>
<td align="right">56317.58</td>
</tr>
<tr class="odd">
<td align="left">EMEA</td>
<td align="left">Product D</td>
<td align="right">22169.80</td>
</tr>
<tr class="even">
<td align="left">EMEA</td>
<td align="left">Product A</td>
<td align="right">17965.06</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_two</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Regions: 1.7 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Region by Sales`</span></span>
<span><span class="co">#&gt; Outlying Region by Sales is NA (1 M, 60.7 %).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`NA by Product`</span></span>
<span><span class="co">#&gt; In NA, significant Products by Sales are Product E (241.6 K, 23.9 %), Product B (201.9 K, 20 %), Product F (154.1 K, 15.2 %).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (440.2 K, 26.4 %), Product B (297.8 K, 17.9 %), Product F (247 K, 14.8 %).</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="depth">Depth<a class="anchor" aria-label="anchor" href="#depth"></a>
</h3>
<p>Narration depth can be controlled with <code>narration_depth</code>
argument. To get summary narratives only set
<code>narration_depth = 1</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_two</span>, narration_depth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Regions: 1.7 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Region by Sales`</span></span>
<span><span class="co">#&gt; Outlying Region by Sales is NA (1 M, 60.7 %).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (440.2 K, 26.4 %), Product B (297.8 K, 17.9 %), Product F (247 K, 14.8 %).</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h3>
<p>Key argument for all narratives is <code>coverage</code>. It is used
to narrate the most important things and avoid simple looping through
all of the dimension levels. <br><br> By default coverage is set to 0.5
and this means that narration will stop as soon as cumulative sum
reaches 50 % mark. With increased coverage, additional narrative is
returned.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_three</span> <span class="op">&lt;-</span> <span class="va">sales</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Product</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>Sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Sales</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Sales</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_three</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Share <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Sales</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Sales</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>         Cumulative <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">Share</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Product</th>
<th align="right">Sales</th>
<th align="right">Share</th>
<th align="right">Cumulative</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Product E</td>
<td align="right">546888.88</td>
<td align="right">25.6</td>
<td align="right">25.6</td>
</tr>
<tr class="even">
<td align="left">Product B</td>
<td align="right">396713.90</td>
<td align="right">18.6</td>
<td align="right">44.2</td>
</tr>
<tr class="odd">
<td align="left">Product F</td>
<td align="right">326244.84</td>
<td align="right">15.3</td>
<td align="right">59.5</td>
</tr>
<tr class="even">
<td align="left">Product H</td>
<td align="right">262662.94</td>
<td align="right">12.3</td>
<td align="right">71.8</td>
</tr>
<tr class="odd">
<td align="left">Product I</td>
<td align="right">215874.38</td>
<td align="right">10.1</td>
<td align="right">81.9</td>
</tr>
<tr class="even">
<td align="left">Product C</td>
<td align="right">196840.76</td>
<td align="right">9.2</td>
<td align="right">91.1</td>
</tr>
<tr class="odd">
<td align="left">Product A</td>
<td align="right">100033.10</td>
<td align="right">4.7</td>
<td align="right">95.8</td>
</tr>
<tr class="even">
<td align="left">Product D</td>
<td align="right">89607.44</td>
<td align="right">4.2</td>
<td align="right">100.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_three</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Products: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %).</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_three</span>, coverage <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Products: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %), Product H (262.7 K, 12.3 %).</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="changing-templates">Changing Templates<a class="anchor" aria-label="anchor" href="#changing-templates"></a>
</h3>
<p>Template-based systems are based on calculations of individual
variables, and combining them together inside of the template. You can
return a list of calculated variables and full narrative
realization:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_three</span>, coverage <span class="op">=</span> <span class="fl">0.7</span>, return_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $template_total</span></span>
<span><span class="co">#&gt; Total Sales across all Products: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $narrative</span></span>
<span><span class="co">#&gt; $narrative$`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Products: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $narrative$`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %), Product H (262.7 K, 12.3 %).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $template_outlier_final</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %), Product H (262.7 K, 12.3 %).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $measure</span></span>
<span><span class="co">#&gt; [1] "Sales"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] "Product"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $total</span></span>
<span><span class="co">#&gt; [1] "2.1 M"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $outlier_insight</span></span>
<span><span class="co">#&gt; [1] "Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %), Product H (262.7 K, 12.3 %)"</span></span></code></pre></div>
<p>Letâ€™s change a template for our narrative function and rework the
wording as well as changing â€˜isâ€™ to â€˜areâ€™ since <code>Sales</code> is
plural:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span></span>
<span>  <span class="va">df_three</span>,</span>
<span>  template_total <span class="op">=</span> <span class="st">"Overall {measure} for all {pluralize(dimension1)} are equal to {total}. "</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Overall Sales for all Products are equal to 2.1 M. </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %).</span></span></code></pre></div>
<p>We can set the templates using <code>usethis::edit_r_environ()</code>
or setting up an environment variable using your data science platform
capabilities.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"descriptive_template_total"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span></span>
<span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span></span>
<span>  <span class="va">df_three</span>,template_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"descriptive_template_total"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %).</span></span></code></pre></div>
<p>A method that is a little more handy is setting
<code>.Renviron</code> variable names using a certain convention and
adding <code>use_renviron = TRUE</code> to the narrate function. For
example here we created a variable that uses the unique part of the
function name, underscore, and template name - <code>descriptive</code>
+ <code>-</code> + <code>template_total</code></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/narrate_descriptive.html">narrate_descriptive</a></span><span class="op">(</span><span class="va">df_three</span>, use_renviron <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $`Total Sales`</span></span>
<span><span class="co">#&gt; Total Sales across all Products: 2.1 M.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Product by Sales`</span></span>
<span><span class="co">#&gt; Outlying Products by Sales are Product E (546.9 K, 25.6 %), Product B (396.7 K, 18.6 %), Product F (326.2 K, 15.3 %).</span></span></code></pre></div>
<p>You can get all templates currently available in the package with
<code><a href="../reference/list_templates.html">list_templates()</a></code> function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list_templates.html">list_templates</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="14%">
<col width="8%">
<col width="20%">
<col width="57%">
</colgroup>
<thead><tr class="header">
<th align="left">fun</th>
<th align="left">type</th>
<th align="left">name</th>
<th align="left">template</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">narrate_descriptive</td>
<td align="left">descriptive</td>
<td align="left">template_total</td>
<td align="left">Total {measure} across all {pluralize(dimension1)}:
{total}.</td>
</tr>
<tr class="even">
<td align="left">narrate_descriptive</td>
<td align="left">descriptive</td>
<td align="left">template_outlier</td>
<td align="left">Outlying {dimension} by {measure} is
{outlier_insight}.</td>
</tr>
<tr class="odd">
<td align="left">narrate_descriptive</td>
<td align="left">descriptive</td>
<td align="left">template_outlier_multiple</td>
<td align="left">Outlying {pluralize(dimension)} by {measure} are
{outlier_insight}.</td>
</tr>
<tr class="even">
<td align="left">narrate_descriptive</td>
<td align="left">descriptive</td>
<td align="left">template_outlier_l2</td>
<td align="left">In {dim_l1}, significant {dim_l2} by {measure} is
{outlier_insight}.</td>
</tr>
<tr class="odd">
<td align="left">narrate_descriptive</td>
<td align="left">descriptive</td>
<td align="left">template_outlier_l2_multiple</td>
<td align="left">In {dim_l1}, significant {pluralize(dim_l2)} by
{measure} are {outlier_insight}.</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Denis Abdullin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
