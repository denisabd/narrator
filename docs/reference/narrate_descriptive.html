<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="narrate_descriptive() creates text narratives from a data frame containing one numeric and one or more character or factor text columns
using glue syntax. Function can work with raw or aggregated data frame.
It will automatically use the first numeric column as measure
and all character or factor columns as dimensions"><title>Create Descriptive Text Narratives from Data — narrate_descriptive • narrator</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.5/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.5/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.5/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Descriptive Text Narratives from Data — narrate_descriptive"><meta property="og:description" content="narrate_descriptive() creates text narratives from a data frame containing one numeric and one or more character or factor text columns
using glue syntax. Function can work with raw or aggregated data frame.
It will automatically use the first numeric column as measure
and all character or factor columns as dimensions"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">narrator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/descriptive.html">Descriptive Narratives</a>
    <a class="dropdown-item" href="../articles/trend.html">Trend Narratives</a>
    <a class="dropdown-item" href="../articles/formatting.html">Formatting Output</a>
    <a class="dropdown-item" href="../articles/templates.html">Editing Templates</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/denisabd/narrator/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create Descriptive Text Narratives from Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/denisabd/narrator/blob/HEAD/R/narrate_descriptive.R" class="external-link"><code>R/narrate_descriptive.R</code></a></small>
      <div class="d-none name"><code>narrate_descriptive.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>narrate_descriptive()</code> creates text narratives from a data frame containing one numeric and one or more character or factor text columns
using <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> syntax. Function can work with raw or aggregated data frame.
It will automatically use the first numeric column as <code>measure</code>
and all character or factor columns as <code>dimensions</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">narrate_descriptive</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  measure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarization <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>  coverage <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  coverage_limit <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  narration_depth <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  template_total <span class="op">=</span> <span class="st">"Total {measure} across all {pluralize(dimension_one)} is {total}."</span>,</span>
<span>  template_average <span class="op">=</span></span>
<span>    <span class="st">"Average {measure} across all {pluralize(dimension_one)} is {total}."</span>,</span>
<span>  template_outlier <span class="op">=</span> <span class="st">"Outlying {dimension} by {measure} is {outlier_insight}."</span>,</span>
<span>  template_outlier_multiple <span class="op">=</span></span>
<span>    <span class="st">"Outlying {pluralize(dimension)} by {measure} are {outlier_insight}."</span>,</span>
<span>  template_outlier_l2 <span class="op">=</span></span>
<span>    <span class="st">"In {level_l1}, significant {level_l2} by {measure} is {outlier_insight}."</span>,</span>
<span>  template_outlier_l2_multiple <span class="op">=</span></span>
<span>    <span class="st">"In {level_l1}, significant {pluralize(level_l2)} by {measure} are {outlier_insight}."</span>,</span>
<span>  use_renviron <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  format_numbers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  collapse_sep <span class="op">=</span> <span class="st">", "</span>,</span>
<span>  collapse_last <span class="op">=</span> <span class="st">" and "</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code> Data frame of tibble, can be aggregated or raw</p></dd>


<dt>measure</dt>
<dd><p>Numeric measure for function to create calculations with,
if NULL then it will take the first numeric field available</p></dd>


<dt>dimensions</dt>
<dd><p>Vector of dimensions for analysis, by default all character
or factor variable will be used</p></dd>


<dt>summarization</dt>
<dd><p>Approach for data summarization/aggregation - 'sum', 'count' or 'average'</p></dd>


<dt>coverage</dt>
<dd><p>Numeric portion of variability to be covered by narrative, 0 to 1</p></dd>


<dt>coverage_limit</dt>
<dd><p>Integer maximum number of elements to be narrated, overrides
coverage to avoid extremely verbose narrative creation</p></dd>


<dt>narration_depth</dt>
<dd><p>Parameter to control the depth of the analysis 1 for summary and 2 for detailed</p></dd>


<dt>template_total</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for total volumes narrative</p></dd>


<dt>template_average</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for average volumes narrative</p></dd>


<dt>template_outlier</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for single outlier narrative</p></dd>


<dt>template_outlier_multiple</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for multiple outliers narrative</p></dd>


<dt>template_outlier_l2</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for deeper hierarchical single outlier narrative</p></dd>


<dt>template_outlier_l2_multiple</dt>
<dd><p><code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code> template for deeper hierarchical multiple outliers narrative</p></dd>


<dt>use_renviron</dt>
<dd><p>If <a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a> use .Renviron variables in the template.
You can also set <code>options(narrator.use_renviron = TRUE)</code> to make it global for the session,
or create an environment variable "use_renviron" by changing your .Renviron file <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code></p></dd>


<dt>return_data</dt>
<dd><p>If <a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a> - return a list of variables used in the function's templates</p></dd>


<dt>simplify</dt>
<dd><p>If <a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a> - return a character vector, if <a href="https://rdrr.io/r/base/logical.html" class="external-link">FALSE</a> - named list</p></dd>


<dt>format_numbers</dt>
<dd><p>If <a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a> - format big numbers to K/M/B using <code><a href="format_num.html">format_num()</a></code> function</p></dd>


<dt>collapse_sep</dt>
<dd><p>Separator for <code><a href="https://glue.tidyverse.org/reference/glue_collapse.html" class="external-link">glue_collapse</a></code> in cases with multiple values in single variable</p></dd>


<dt>collapse_last</dt>
<dd><p>Separator for <code><a href="https://glue.tidyverse.org/reference/glue_collapse.html" class="external-link">glue_collapse</a></code> for the last item, in cases with multiple values in single variable</p></dd>


<dt>...</dt>
<dd><p>other arguments passed to <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of narratives by default and <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character()</a></code> if <code>simplify = TRUE</code></p>


    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">sales</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu">narrate_descriptive</span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"Sales"</span>,</span></span>
<span class="r-in"><span>            dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Region"</span>, <span class="st">"Product"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Total Sales`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Sales across all Regions is 38.79 M.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Region by Sales`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outlying Regions by Sales are NA (18.1 M, 46.6 %), EMEA (13.6 M, 34.9 %).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`NA by Product`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> In NA, significant Products by Sales are Food &amp; Beverage (7.4 M, 40.9 %), Electronics (3.8 M, 21 %).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`EMEA by Product`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> In EMEA, significant Products by Sales are Food &amp; Beverage (5.3 M, 38.8 %), Electronics (3.2 M, 23.5 %).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Product by Sales`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outlying Products by Sales are Food &amp; Beverage (15.5 M, 40.1 %), Electronics (8.6 M, 22.2 %).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sales</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Product</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Product A"</span>, <span class="st">"Product B"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Product</span>, <span class="va">Region</span><span class="op">)</span>  <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>Quantity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Quantity</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">narrate_descriptive</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Total Quantity`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Quantity across all Products is 0.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Product by Quantity`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outlying Product by Quantity is .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Region by Quantity`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outlying Region by Quantity is .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sales</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu">narrate_descriptive</span><span class="op">(</span>measure <span class="op">=</span> <span class="st">"Order ID"</span>, dimensions <span class="op">=</span> <span class="st">"Region"</span>, summarization <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Total Order ID`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total Order ID across all Regions is 10 K.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Region by Order ID`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Outlying Regions by Order ID are NA (3,975, 39.8 %), EMEA (2,986, 29.9 %).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Denis Abdullin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

